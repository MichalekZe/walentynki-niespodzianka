<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Mam pytanie... わ</title>
    
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700;900&display=swap" rel="stylesheet">
    
    <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>

    <meta property="og:title" content="Mam mae pytanie... か">
    <meta property="og:description" content="Kliknij, 偶eby odebra przesyk!">
    <meta property="og:image" content="assets/preview.jpg"> <meta property="og:url" content="https://michalekze.github.io/walentynki-niespodzianka/assets/preview.jpg">
    <meta property="og:type" content="website">
    <meta name="theme-color" content="#ff4757">
<style>
        /* --- NOWE STYLE CSS (WERSJA STABILNA) --- */
        :root {
            --primary: #ff4757;
            --dark: #2f3542;
            --light: #f1f2f6;
            --accent: #1e90ff;
            --inviting: #2ed573;
            --pink-bg-1: #fff0f3;
            --pink-bg-2: #ffe3e3;
        }

        body, html {
            margin: 0; padding: 0; height: 100%; width: 100%;
            font-family: 'Montserrat', sans-serif;
            background: linear-gradient(135deg, var(--pink-bg-1) 0%, var(--pink-bg-2) 100%);
            
            /* ZMIANA: Odblokowujemy przewijanie pionowe, blokujemy tylko poziome */
            overflow-y: auto; 
            overflow-x: hidden; 
        }

        .container {
            display: flex; flex-direction: column; justify-content: center; align-items: center;
            height: 100vh; width: 100%;
            position: absolute; top: 0; left: 0;
            /* Usunem transition opacity, bo to powodowao lagi i duchy */
        }

        .hidden { display: none !important; }

        /* --- NAGWKI --- */
        h1 { 
            text-align: center; color: var(--primary); margin-bottom: 1rem; z-index: 100;
            font-size: 3rem; text-shadow: 3px 3px 6px rgba(255, 71, 87, 0.3);
        }
        
        #scene-intro h1 {
            font-size: 5rem; line-height: 1.2; margin-bottom: 60px;
        }

        h2 { text-align: center; color: var(--dark); margin-bottom: 2rem; z-index: 100; font-size: 2.5rem; }
        p { font-size: 1.5rem; color: #57606f; margin-bottom: 2rem; text-align: center; }

        /* --- PREZENT --- */
        .present-box {
            font-size: 8rem; cursor: pointer; z-index: 200;
            animation: pulse 2s infinite ease-in-out;
        }
        .present-box:hover { transform: scale(1.1) rotate(5deg); }
        .present-opening { animation: openBox 0.6s forwards ease-in-out; }

        @keyframes openBox {
            0% { transform: scale(1); }
            50% { transform: scale(1.2) rotate(10deg); }
            100% { transform: scale(0); opacity: 0; }
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        /* --- PRZYCISKI --- */
        .btn-group { 
            position: relative; width: 100%; display: flex; 
            justify-content: center; align-items: center; gap: 40px; margin-top: 40px; z-index: 200;
        }
        button {
            border: none; border-radius: 60px; cursor: pointer;
            font-weight: 800; font-family: 'Montserrat', sans-serif;
            text-transform: uppercase; letter-spacing: 2px;
        }
        .btn-yes { 
            background-color: #ffffff; color: var(--primary); border: 2px solid #fff0f3;
            padding: 20px 50px; font-size: 1.5rem; z-index: 200;
            transition: transform 0.2s;
        }
        .btn-yes:hover { transform: scale(1.05); }

        .btn-no { 
            background: linear-gradient(135deg, #ff416c 0%, #ff4b2b 100%); color: white; 
            padding: 40px 120px; font-size: 4rem; border-radius: 100px;
            z-index: 9999 !important; box-shadow: 0 20px 60px rgba(255, 65, 108, 0.6); 
            position: relative; animation: heartbeat 1.5s infinite; white-space: nowrap;
        }
        @keyframes heartbeat {
            0% { transform: scale(1); }
            15% { transform: scale(1.05); } 30% { transform: scale(1); }
            45% { transform: scale(1.05); } 100% { transform: scale(1); }
        }

        /* --- SCENA 2: TRANSPORT (POCIG ) --- */
        .train-container { 
            width: 80%; max-width: 800px; position: relative; 
            height: 150px; display: flex; align-items: center;
        }

        .station-label {
            position: absolute; 
            top: -70px; /* BYO -20px. Teraz s du偶o wy偶ej. */
            font-weight: 800; 
            color: var(--dark);
            text-align: center; 
            font-size: 1.5rem; 
            z-index: 10;
            line-height: 1.2; /* Lekko zmniejszona interlinia dla ikonki i tekstu */
        }
        .label-left { left: 0; }
        .label-right { right: 0; }

        /* TORY KOLEJOWE */
        .track { 
            width: 100%; height: 16px; 
            border-top: 4px solid #57606f; border-bottom: 4px solid #57606f;
            position: relative; z-index: 1;
        }
        .track::before {
            content: ''; position: absolute; top: 0; left: 0; right: 0; bottom: 0;
            background: repeating-linear-gradient(90deg, transparent, transparent 10px, #57606f 10px, #57606f 14px);
        }

        /* POCIG */
        .vehicle { 
            font-size: 6rem; 
            position: absolute; 
            /* Ustawienie na torach (mo偶e wymaga lekkiej korekty u Ciebie +/- 2px) */
            top: 38px; 
            left: 0; 
            z-index: 50;
            
            /* Domylnie stoi i tylko patrzy w prawo */
            transform: translateY(-50%) scaleX(-1);
            
            /* Domylnie brak ruchu */
            transition: left 5s linear; 
        }

        /* Klasa, kt贸r dodamy jak ruszy - uruchamia podskakiwanie */
        .vehicle.moving {
            animation: rumble 0.5s infinite linear;
        }

        /* Definicja podskakiwania (g贸ra-d贸 + lekkie przechylenie) */
        @keyframes rumble {
            0%   { transform: translateY(-50%) scaleX(-1) rotate(0deg); }
            25%  { transform: translateY(-52%) scaleX(-1) rotate(-2deg); }
            50%  { transform: translateY(-50%) scaleX(-1) rotate(0deg); }
            75%  { transform: translateY(-48%) scaleX(-1) rotate(2deg); }
            100% { transform: translateY(-50%) scaleX(-1) rotate(0deg); }
        }

        /* --- KARTY I BILETY --- */
        .cards-grid { display: flex; gap: 20px; justify-content: center; flex-wrap: wrap; }
        .card {
            width: 220px; height: 300px; border-radius: 15px; background: white;
            box-shadow: 0 10px 20px rgba(0,0,0,0.1); cursor: pointer; overflow: hidden;
            position: relative; transition: transform 0.3s; display: flex; flex-direction: column; align-items: center;
        }
        .card:hover { transform: translateY(-10px); }
        .card img { width: 100%; height: 200px; object-fit: cover; }
        .card h3 { margin-top: 20px; font-size: 1.5rem; }
        .card.error { border: 3px solid var(--primary); }
        
        .tickets-container { display: flex; flex-direction: column; gap: 20px; align-items: center; padding-bottom: 50px; }
        .ticket {
            background: white; width: 600px; max-width: 90%; border-radius: 15px; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.15); display: flex; overflow: hidden;
        }
        .ticket-left {
            background: var(--primary); color: white; padding: 20px; width: 30%;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            border-right: 2px dashed rgba(255,255,255,0.5);
        }
        .ticket-right { padding: 20px; width: 70%; }
        .route { font-size: 2rem; font-weight: bold; margin-bottom: 10px; color: var(--dark); }
        .flight-info { display: flex; justify-content: space-between; margin-top: 15px; color: #7f8c8d; }
        .ticket-return { background: #f1f2f6; border: 2px dashed #bdc3c7; }
        .ticket-return .ticket-left { background: #bdc3c7; }

        /* --- SEKCYJA ROZLICZENIA DUGU Ь --- */
        .debt-note {
            background: #fdfdfd;
            border: 1px solid #e0e0e0;
            padding: 30px;
            width: 500px;
            max-width: 90%;
            margin-top: 40px;
            border-radius: 5px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.05);
            position: relative;
            text-align: center;
            font-family: 'Courier New', Courier, monospace; /* Czcionka jak z rachunku */
        }

        .debt-note h3 {
            border-bottom: 2px dashed #ccc;
            padding-bottom: 10px;
            margin-bottom: 20px;
            font-size: 1.5rem;
            color: #333;
        }

        .debt-details p {
            font-size: 1.1rem;
            margin: 10px 0;
            text-align: left;
            color: #555;
        }

        /* PIECZTKA */
        .stamp-container {
            position: absolute;
            top: 40%;
            right: 10%;
            transform: rotate(-15deg);
        }

        .stamp {
            border: 5px solid #2ed573; /* Zielony kolor "ZATWIERDZONO" */
            color: #2ed573;
            font-size: 2.5rem;
            font-weight: 900;
            padding: 10px 20px;
            text-transform: uppercase;
            border-radius: 10px;
            opacity: 0; /* Na start ukryta */
            mask-image: url('https://s3-us-west-2.amazonaws.com/s.cdpn.io/8399/grunge.png'); /* Efekt starcia (opcjonalny) */
            mix-blend-mode: multiply;
        }

        /* Animacja uderzenia piecztki */
        .stamp-visible {
            animation: stamp-slam 0.5s cubic-bezier(0.6, 0.04, 0.98, 0.335) forwards;
        }

        @keyframes stamp-slam {
            0% { transform: scale(3); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: scale(1); opacity: 0.8; }
        }

        /* ZMIANA: Pozwalamy scenie z biletami rosn w d贸 */
        #scene-tickets {
            height: auto !important; /* Kasujemy sztywne 100vh */
            min-height: 100vh;       /* Ale minimalnie ma by na cay ekran */
            justify-content: flex-start; /* Zaczynamy od g贸ry */
            padding-top: 50px;
            padding-bottom: 100px; /* Margines na dole, 偶eby rachunek mia luz */
        }
    </style>
</head>
<body>

<div id="scene-present" class="container">
        <h1>Mam co dla Ciebie... か</h1>
        <div id="gift-box" class="present-box"></div>
        <p style="margin-top: 20px;">Kliknij, 偶eby rozpakowa!</p>
    </div>

    <div id="scene-intro" class="container hidden">
        <h1>Zostaniesz moj Walentynk? わ<br><span style="font-size: 0.5em; color: #777; font-weight: normal;">Troszk p贸藕no, ale bdziesz zadowolona jak si oczywicie zgodzisz ズズ</span></h1>
        <div class="btn-group">
            <button id="btn-yes" class="btn-yes">TAK</button>
            <button id="btn-no" class="btn-no">NIE</button>
        </div>
    </div>

<div id="scene-train" class="container hidden">
        <h2 style="margin-bottom: 80px;">Ruszamy na lotnisko... </h2>
        
        <div class="train-container">
            <div class="station-label label-left"><br>Bydgoszcz</div>
            <div class="station-label label-right">锔<br>Krak贸w - Balice</div>

            <div class="vehicle"></div>

            <div class="track"></div>
        </div>
    </div>

<div id="scene-guess1" class="container hidden">
        <h2>Jestemy na lotnisku. Gdzie lecimy na wakacje?</h2>
        <p id="feedback-1">Wybierz kochanie co fajnego dla nas</p>
        
        <div class="cards-grid">
            <div class="card" onclick="wrongAnswer(this, 'Tam ju偶 bya')">
                <img src="https://images.unsplash.com/photo-1519677100203-a0e668c92439?auto=format&fit=crop&w=400" alt="Praga">
                <h3>Praga?</h3>
            </div>

            <div class="card" onclick="wrongAnswer(this, 'Nie lubimy brytoli')">
                <img src="https://images.unsplash.com/photo-1513635269975-59663e0ac1ad?auto=format&fit=crop&w=400" alt="Londyn">
                <h3>Londyn?</h3>
            </div>

            <div class="card" onclick="correctAnswer1()">
                <img src="assets/budapeszt.jpg" alt="Budapeszt" onerror="this.src='https://images.unsplash.com/photo-1565426873118-a1dfa295323e?auto=format&fit=crop&w=400'">
                <h3>Budapeszt?</h3>
            </div>
        </div>
    </div>

    <div id="scene-guess2" class="container hidden">
        <h2>Ale Budapeszt to tylko szybkie zwiedzanie i nocleg<br>Gdzie lecimy dalej?</h2>
        <p id="feedback-2">O cyzm rozmawialimy niedawno?</p>
        
        <div class="cards-grid">
            <div class="card" onclick="wrongAnswer(this, 'Jeszcze polecimy kiedy')">
                <img src="https://images.unsplash.com/photo-1583422409516-2895a77efded?auto=format&fit=crop&w=400" alt="Barcelona">
                <h3>Barcelona?</h3>
            </div>

            <div class="card" onclick="correctAnswer2()">
                <img src="assets/ateny.jpg" alt="Ateny" onerror="this.src='https://images.unsplash.com/photo-1603565816030-6b389eeb23cb?auto=format&fit=crop&w=400'">
                <h3>Ateny?</h3>
            </div>

            <div class="card" onclick="wrongAnswer(this, 'Kiedy zwiedzimy, ale nie teraz')">
                <img src="https://images.unsplash.com/photo-1552832230-c0197dd311b5?auto=format&fit=crop&w=400" alt="Rzym">
                <h3>Rzym?</h3>
            </div>
        </div>
    </div>

    <div id="scene-tickets" class="container hidden" style="height: auto; min-height: 100vh; padding-top: 50px;">
        <h1>Wszystko zaatwione! わ</h1>
        <p>Lecimy we Wrzeniu kochanie, Kocham Ci sonko わわわ</p>
        
        <div class="tickets-container">
            <div class="ticket">
                <div class="ticket-left">
                    <span style="font-size: 2rem;">23</span>
                    <span>WRZ</span>
                </div>
                <div class="ticket-right">
                    <div class="route">KRK 锔 BUD</div>
                    <div class="flight-info">
                        <div>
                            <div class="label">Wylot</div>
                            <div class="value">08:50</div>
                        </div>
                        <div>
                            <div class="label">Lot</div>
                            <div class="value">W62420</div> 
                        </div>
                    </div>
                </div>
            </div>

            <div class="ticket">
                <div class="ticket-left" style="background-color: #1e90ff;">
                    <span style="font-size: 2rem;">25</span>
                    <span>WRZ</span>
                </div>
                <div class="ticket-right">
                    <div class="route">BUD 锔 ATH</div>
                    <div class="flight-info">
                        <div>
                            <div class="label">Wylot</div>
                            <div class="value">06:05</div>
                        </div>
                        <div>
                            <div class="label">Lot</div>
                            <div class="value">FR1243</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="ticket ticket-return">
                <div class="ticket-left">
                    <span style="font-size: 1.5rem;">?</span>
                </div>
                <div class="ticket-right">
                    <div class="route">ATH 锔 POLSKA</div>
                    <div style="margin-top: 15px; color: #7f8c8d;">
                        <i>Data powrotu do ogarnicia...</i><br>
                    </div>
                </div>
            </div>

            <div class="debt-note">
                <h3>Ь Oficjalna Nota Ksigowa</h3>
                <div class="debt-details">
                    <p><strong>Wierzyciel:</strong> M贸j pikny gyacik </p>
                    <p><strong>Du偶nik:</strong> Ju偶 nie ja</p>
                    <p><strong>Tytu:</strong> "Kasa za buty"</p>
                    <p><strong>Metoda patnoci:</strong> <span style="color: var(--primary);">Wakacje z twoim alvaro 锔</span></p>
                </div>
                
                <div class="stamp-container">
                    <div class="stamp">DUG<br>SPACONY</div>
                </div>

                <p style="font-size: 0.8rem; margin-top: 15px; color: #aaa;">
                    *Niniejszy dokument jest ostateczny i nie podlega reklamacji. <br>
                    
                </p>
            </div>
        </div>
    </div>

    <script>
        // --- LOGIKA JS ---

        // Pomocnicza funkcja zmiany scen (BEZ PYNNYCH PRZEJ 呕EBY NIE BYO BDW)
        function switchScene(fromId, toId) {
            const fromEl = document.getElementById(fromId);
            const toEl = document.getElementById(toId);
            
            // Natychmiastowe ukrycie
            fromEl.classList.add('hidden');
            fromEl.style.display = 'none'; // Wymuszenie
            
            // Pokazanie nowej
            toEl.classList.remove('hidden');
            toEl.style.display = 'flex';   // Wymuszenie
        }

        // 0. Obsuga Prezentu
        const giftBox = document.getElementById('gift-box');
        giftBox.addEventListener('click', () => {
            giftBox.style.animation = 'none'; 
            void giftBox.offsetWidth; 
            giftBox.classList.add('present-opening');

            // Wybuch serduszek
            confetti({
                particleCount: 80, spread: 100, origin: { y: 0.5 },
                colors: ['#ff4757', '#ff6b81', '#ffffff'], shapes: ['heart']
            });

            // SZYBSZE PRZEJCIE - tylko 600ms czekania
            setTimeout(() => {
                switchScene('scene-present', 'scene-intro');
            }, 600);
        });

        // 1. Uciekajcy przycisk NIE
        const noBtn = document.getElementById('btn-no');
        const yesBtn = document.getElementById('btn-yes');

        function moveButton() {
            if (noBtn.style.position !== 'fixed') { noBtn.style.position = 'fixed'; }
            const btnWidth = noBtn.offsetWidth;
            const btnHeight = noBtn.offsetHeight;
            const maxX = window.innerWidth - btnWidth - 20;
            const maxY = window.innerHeight - btnHeight - 20;
            const safeX = Math.max(10, Math.random() * maxX);
            const safeY = Math.max(10, Math.random() * maxY);
            noBtn.style.left = `${safeX}px`;
            noBtn.style.top = `${safeY}px`;
        }
        noBtn.addEventListener('mouseover', moveButton);
        noBtn.addEventListener('touchstart', (e) => { e.preventDefault(); moveButton(); });

        // 2. Kliknicie TAK - OBSUGA POCIGU
        // 2. Kliknicie TAK - OBSUGA POCIGU + PULSOWANIE
        yesBtn.addEventListener('click', () => {
            switchScene('scene-intro', 'scene-train');
            
            const vehicle = document.querySelector('.vehicle');
            
            // RESET POZYCJI I KLASY
            vehicle.classList.remove('moving'); // Upewniamy si, 偶e nie skacze na starcie
            vehicle.style.transition = 'none';
            vehicle.style.left = '0px';
            
            // START ANIMACJI PO CHWILI
            setTimeout(() => {
                vehicle.classList.add('moving'); // START PODSKAKIWANIA!
                vehicle.style.transition = 'left 5s linear'; // JAZDA
                vehicle.style.left = 'calc(100% - 100px)';   // META
            }, 50);

            // PRZEJCIE DALEJ
            setTimeout(() => {
                switchScene('scene-train', 'scene-guess1');
            }, 5500);
        });

        // 3. Quiz 1 - Budapeszt
        function correctAnswer1() {
            document.getElementById('feedback-1').innerText = "TAK! Ale to nie wszystko...";
            document.getElementById('feedback-1').style.color = "green";
            setTimeout(() => { switchScene('scene-guess1', 'scene-guess2'); }, 1000);
        }

        // 4. Quiz 2 - Ateny
        function correctAnswer2() {
            document.getElementById('feedback-2').innerText = "No to kierunek Grecja, sama wybraa";
            document.getElementById('feedback-2').style.color = "green";
            
            setTimeout(() => { 
                switchScene('scene-guess2', 'scene-tickets'); 
                runConfetti();

                // Czekamy chwil i walimy piecztk + przewijamy
                setTimeout(() => {
                    // 1. Poka偶 piecztk
                    const stamp = document.querySelector('.stamp');
                    if(stamp) stamp.classList.add('stamp-visible'); // Zabezpieczenie if
                    
                    // 2. Przewi ekran na sam d贸 pynnie
                    window.scrollTo({
                        top: document.body.scrollHeight,
                        behavior: 'smooth'
                    });
                    
                }, 1500);

            }, 1000);
        }

        function wrongAnswer(element, msg) {
            const parent = element.parentElement.parentElement;
            const feedback = parent.querySelector('p');
            feedback.innerText = msg; feedback.style.color = "red";
        }

        function runConfetti() {
            var end = Date.now() + 3000;
            (function frame() {
                confetti({ particleCount: 5, angle: 60, spread: 55, origin: { x: 0 } });
                confetti({ particleCount: 5, angle: 120, spread: 55, origin: { x: 1 } });
                if (Date.now() < end) requestAnimationFrame(frame);
            }());
        }
    </script>
</body>

</html>
